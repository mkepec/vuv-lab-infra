//
// BIND9 Local Zone Configuration
// Generated by Ansible on {{ ansible_date_time.iso8601 }}
// DO NOT EDIT MANUALLY - This file is managed by dns-configuration role
//

{% for zone in dns_zones | default([]) %}
// Forward zone for {{ zone.zone.name }}
zone "{{ zone.zone.name }}" {
    type master;
    file "/etc/bind/zones/{{ zone.zone.name }}";
    allow-query { trusted-networks; };
    allow-transfer { none; };
    allow-update { none; };
};

{% endfor %}
{% for reverse_zone in dns_reverse_zones | default([]) %}
// Reverse zone for {{ reverse_zone.network }}
zone "{{ reverse_zone.arpa_zone | default(reverse_zone.network.split('.')[2] + '.' + reverse_zone.network.split('.')[1] + '.' + reverse_zone.network.split('.')[0] + '.in-addr.arpa') }}" {
    type master;
    file "/etc/bind/zones/reverse.{{ reverse_zone.network | replace('/', '-') }}.in-addr.arpa";
    allow-query { trusted-networks; };
    allow-transfer { none; };
    allow-update { none; };
};

{% endfor %}
// Include any additional zones here